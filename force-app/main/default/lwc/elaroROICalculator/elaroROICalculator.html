<template>
  <div class="roi-calculator" role="region" aria-label="Elaro ROI Calculator">
    <div class="calculator-header">
      <h2>Elaro ROI Calculator</h2>
      <p class="subtitle">Calculate your annual compliance cost savings</p>
    </div>

    <div class="calculator-inputs" role="group" aria-label="ROI calculation inputs">
      <div class="input-group">
        <lightning-combobox
          label="Industry"
          value={industry}
          options={industryOptions}
          onchange={handleIndustryChange}
        >
        </lightning-combobox>
      </div>

      <div class="input-group">
        <lightning-input
          type="number"
          label="Organization Size (Users)"
          value={orgSize}
          onchange={handleOrgSizeChange}
        >
        </lightning-input>
      </div>

      <div class="input-group">
        <lightning-input
          type="number"
          label="Current Annual Audit Spend ($)"
          value={currentAuditSpend}
          formatter="currency"
          onchange={handleAuditSpendChange}
        >
        </lightning-input>
      </div>

      <div class="input-group">
        <lightning-input
          type="number"
          label="Current Audit Prep Hours/Year"
          value={currentAuditPrepHours}
          onchange={handleHoursChange}
        >
        </lightning-input>
      </div>

      <div class="input-group">
        <lightning-input
          type="number"
          label="Compliance Analyst Hourly Rate ($)"
          value={hourlyRate}
          formatter="currency"
          onchange={handleRateChange}
        >
        </lightning-input>
      </div>
    </div>

    <template lwc:if={showResults}>
      <div class="roi-results" role="region" aria-label="ROI analysis results">
        <div class="results-header">
          <h3>Your ROI Analysis</h3>
        </div>

        <div class="results-grid" role="group" aria-label="ROI calculation results">
          <div class="result-card savings" role="article" aria-label="Annual time savings">
            <div class="result-label">Annual Time Savings</div>
            <div class="result-value" aria-live="polite">{roiResults.timeSavings} hours</div>
            <div class="result-detail">${formattedTimeSavingsDollars} in labor costs</div>
          </div>

          <div class="result-card savings" role="article" aria-label="Audit cost reduction">
            <div class="result-label">Audit Cost Reduction</div>
            <div class="result-value" aria-live="polite">${formattedAuditCostReduction}</div>
            <div class="result-detail">30% reduction in external audit costs</div>
          </div>

          <div class="result-card total" role="article" aria-label="Total annual savings">
            <div class="result-label">Total Annual Savings</div>
            <div class="result-value" aria-live="polite">${formattedTotalSavings}</div>
            <div class="result-detail">${formattedMonthlySavings}/month</div>
          </div>

          <div class="result-card cost" role="article" aria-label="Elaro annual cost">
            <div class="result-label">Elaro Annual Cost</div>
            <div class="result-value" aria-live="polite">${formattedElaroCost}</div>
          </div>

          <div class="result-card net" role="article" aria-label="Net annual benefit">
            <div class="result-label">Net Annual Benefit</div>
            <div class="result-value {roiClass}" aria-live="polite">${formattedNetBenefit}</div>
          </div>

          <div class="result-card roi" role="article" aria-label="Return on investment">
            <div class="result-label">ROI</div>
            <div class="result-value {roiClass}" aria-live="polite">{roiResults.roi}%</div>
            <div class="result-detail">Payback in {roiResults.paybackWeeks} weeks</div>
          </div>
        </div>

        <div class="roi-summary">
          <template lwc:if={hasPositiveROI}>
            <div class="summary-positive">
              <strong>Elaro pays for itself in {roiResults.paybackWeeks} weeks</strong>
              <p>You'll save ${formattedNetBenefit} in the first year alone.</p>
            </div>
          </template>
          <template lwc:if={hasNegativeROI}>
            <div class="summary-negative">
              <strong>Adjust your inputs to see potential savings</strong>
              <p>Most organizations see 80-85% reduction in audit prep time.</p>
            </div>
          </template>
        </div>
      </div>
    </template>
  </div>
</template>
