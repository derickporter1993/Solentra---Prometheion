<?xml version="1.0" encoding="UTF-8"?>
<CustomObject xmlns="http://soap.sforce.com/2006/04/metadata">
    <label>Integration Error</label>
    <pluralLabel>Integration Errors</pluralLabel>
    <nameField>
        <type>AutoNumber</type>
        <label>Integration Error Number</label>
        <displayFormat>IE-{00000}</displayFormat>
    </nameField>
    <deploymentStatus>Deployed</deploymentStatus>
    <sharingModel>ReadWrite</sharingModel>
    <fields>
        <fullName>Error_Type__c</fullName>
        <description>Category of integration that failed: Slack, Teams, Einstein AI, API callouts, or other</description>
        <inlineHelpText>Type of integration that encountered the error</inlineHelpText>
        <label>Error Type</label>
        <type>Picklist</type>
        <required>true</required>
        <valueSet>
            <restricted>true</restricted>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>SLACK</fullName>
                    <default>false</default>
                    <label>Slack</label>
                </value>
                <value>
                    <fullName>TEAMS</fullName>
                    <default>false</default>
                    <label>Teams</label>
                </value>
                <value>
                    <fullName>EINSTEIN</fullName>
                    <default>false</default>
                    <label>Einstein</label>
                </value>
                <value>
                    <fullName>API_CALLOUT</fullName>
                    <default>false</default>
                    <label>API Callout</label>
                </value>
                <value>
                    <fullName>OTHER</fullName>
                    <default>false</default>
                    <label>Other</label>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>Error_Message__c</fullName>
        <description>Detailed error message captured from the failed integration. May include HTTP status codes, API responses, or exception messages.</description>
        <inlineHelpText>Full error message from the failed operation</inlineHelpText>
        <label>Error Message</label>
        <type>LongTextArea</type>
        <length>32768</length>
        <visibleLines>5</visibleLines>
    </fields>
    <fields>
        <fullName>Stack_Trace__c</fullName>
        <description>Apex stack trace at the point of failure. Used for debugging to identify the exact code path that caused the error.</description>
        <inlineHelpText>Stack trace for debugging</inlineHelpText>
        <label>Stack Trace</label>
        <type>LongTextArea</type>
        <length>32768</length>
        <visibleLines>5</visibleLines>
    </fields>
    <fields>
        <fullName>Correlation_Id__c</fullName>
        <description>Unique identifier to correlate this error with external system logs. Useful for cross-system debugging.</description>
        <inlineHelpText>ID for correlating with external system logs</inlineHelpText>
        <label>Correlation ID</label>
        <type>Text</type>
        <length>50</length>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Context__c</fullName>
        <description>Additional context about the error including record IDs, user actions, or request/response data that helps diagnose the issue.</description>
        <inlineHelpText>Additional context information for debugging</inlineHelpText>
        <label>Context</label>
        <type>LongTextArea</type>
        <length>32768</length>
        <visibleLines>5</visibleLines>
    </fields>
    <fields>
        <fullName>Retry_Count__c</fullName>
        <description>Number of retry attempts made for this failed operation. Maximum retries are configured per integration type.</description>
        <inlineHelpText>Number of retry attempts made</inlineHelpText>
        <label>Retry Count</label>
        <type>Number</type>
        <precision>3</precision>
        <scale>0</scale>
        <defaultValue>0</defaultValue>
    </fields>
    <fields>
        <fullName>Status__c</fullName>
        <description>Current status of the error: New (just occurred), Retrying (retry in progress), Resolved (fixed), or Failed (all retries exhausted)</description>
        <inlineHelpText>Current status of error handling</inlineHelpText>
        <label>Status</label>
        <type>Picklist</type>
        <valueSet>
            <restricted>true</restricted>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>NEW</fullName>
                    <default>true</default>
                    <label>New</label>
                </value>
                <value>
                    <fullName>RETRYING</fullName>
                    <default>false</default>
                    <label>Retrying</label>
                </value>
                <value>
                    <fullName>RESOLVED</fullName>
                    <default>false</default>
                    <label>Resolved</label>
                </value>
                <value>
                    <fullName>FAILED</fullName>
                    <default>false</default>
                    <label>Failed</label>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>Timestamp__c</fullName>
        <description>Date and time when the error occurred. Used for troubleshooting and correlating with external system logs.</description>
        <inlineHelpText>When the error occurred</inlineHelpText>
        <label>Timestamp</label>
        <type>DateTime</type>
        <required>true</required>
    </fields>
</CustomObject>
